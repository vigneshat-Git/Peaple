<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login to Peaple</title>
  <script src="https://cdn.tailwindcss.com"></script>
<!-- Firebase scripts -->
<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-auth-compat.js"></script>
<script>
if (!firebase.apps.length) {
  firebase.initializeApp({
    apiKey: "AIzaSyCnUEkbwEYruJ0YvbQkjFC9yfMDJsLqOlo",
    authDomain: "peaple-c3f4b.firebaseapp.com",
    projectId: "peaple-c3f4b",
    storageBucket: "peaple-c3f4b.firebasestorage.app",
    messagingSenderId: "814546020627",
    appId: "1:814546020627:web:c43c90fe6af9a0359e52e6",
    measurementId: "G-KHQMHRZ08F"
  });
}
window.auth = firebase.auth();
</script>
</head>
<body class="bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 min-h-screen flex items-center justify-center">
  <div class="w-full max-w-md bg-white rounded-2xl shadow-2xl p-8">
    <div class="mb-6 text-center">
    
<script>
// Email Link (passwordless) sign-in logic
const sendEmailLinkBtn = document.getElementById('sendEmailLinkBtn');
const emailLinkInput = document.getElementById('emailLinkInput');
if (sendEmailLinkBtn) {
  sendEmailLinkBtn.addEventListener('click', function() {
    const email = emailLinkInput.value.trim();
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!email) {
      alert('Please enter your email.');
      return;
    }
    if (!emailPattern.test(email)) {
      alert('Please enter a valid email address.');
      return;
    }
    const actionCodeSettings = {
      url: window.location.origin + '/login.html',
      handleCodeInApp: true,
      iOS: {
        bundleId: 'com.example.ios'
      },
      android: {
        packageName: 'com.example.android',
        installApp: true,
        minimumVersion: '12'
      },
      // linkDomain: 'peaple-c3f4b.firebaseapp.com' // Uncomment and set if you use a custom domain
    };
    auth.sendSignInLinkToEmail(email, actionCodeSettings)
      .then(() => {
        window.localStorage.setItem('emailForSignIn', email);
        alert('Sign-in link sent! Check your email.');
      })
      .catch((error) => {
        alert(error.message);
      });
  });
}

// Complete sign-in with email link if present in URL
if (auth.isSignInWithEmailLink(window.location.href)) {
  let email = window.localStorage.getItem('emailForSignIn');
  if (!email) {
    email = window.prompt('Please provide your email for confirmation');
  }
  auth.signInWithEmailLink(email, window.location.href)
    .then((result) => {
      window.localStorage.removeItem('emailForSignIn');
      window.location.href = 'index.html';
    })
    .catch((error) => {
      alert(error.message);
    });
}
</script>
      <h1 class="text-3xl font-bold text-indigo-700">Join here as Peaple</h1>
      <p class="text-gray-600">Peaple - for - People.</p>
    </div>

    <!-- Toggle Buttons -->
    <div class="flex justify-center mb-6 space-x-4">
      <button id="loginBtn" class="py-2 px-4 text-white bg-indigo-600 rounded-full">Login</button>
      <button id="registerBtn" class="py-2 px-4 text-indigo-600 border border-indigo-600 rounded-full">Register</button>
    </div>

    <!-- Passwordless Email Link Sign-in -->
    <div class="mb-4 p-3 rounded-lg bg-blue-50 border border-blue-200">
      <label for="emailLinkInput" class="block text-blue-700 text-sm font-semibold mb-1">Sign in with Email Link:</label>
      <div class="flex gap-2">
        <input type="email" id="emailLinkInput" name="emailLinkInput" placeholder="Enter your email for link sign-in" class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" />
        <button type="button" id="sendEmailLinkBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Send Link</button>
      </div>
      <div class="text-xs text-blue-700 mt-1">A sign-in link will be sent to your email. Click it to sign in.</div>
    </div>


    <!-- Divider between passwordless and email/password login -->
    <div class="flex items-center my-6">
      <hr class="flex-grow border-gray-300" />
      <span class="mx-3 text-gray-500 text-sm font-semibold">or</span>
      <hr class="flex-grow border-gray-300" />
    </div>

    <!-- Login Form -->
    <form id="loginForm" class="space-y-4">



      <input type="email" id="loginEmail" name="loginEmail" placeholder="Email" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400" required />
      <input type="password" id="loginPassword" name="loginPassword" placeholder="Password" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400" required />
      <div id="loginErrorMsg" style="color:#e53935;font-size:0.97em;margin-top:2px;min-height:18px;"></div>
      <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700">Login</button>

      <div class="flex items-center justify-between mt-4">
        <hr class="w-1/4 border-gray-300" />
        <span class="text-gray-500 text-sm">or continue with</span>
        <hr class="w-1/4 border-gray-300" />
      </div>

      <div class="flex space-x-4 mt-4 justify-center">
        <button class="bg-white border px-4 py-2 rounded-lg shadow hover:bg-gray-100 flex items-center space-x-2">
          <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5" />
          <span class="text-sm">Google</span>
        </button>
        <button class="bg-white border px-4 py-2 rounded-lg shadow hover:bg-gray-100 flex items-center space-x-2">
          <img src="https://www.svgrepo.com/show/448234/linkedin.svg" class="w-5 h-5" />
          <span class="text-sm">LinkedIn</span>
        </button>
      </div>
    </form>

    <!-- Register Form -->
    <form id="registerForm" class="space-y-4 hidden">
      <div class="flex space-x-2">
        <input type="text" id="registerFirstName" name="registerFirstName" placeholder="First Name" class="w-1/2 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400" required />
        <input type="text" id="registerLastName" name="registerLastName" placeholder="Last Name" class="w-1/2 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400" required />
      </div>
      <input type="email" id="registerEmail" name="registerEmail" placeholder="Email" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400" required />
      <input type="password" id="registerPassword" name="registerPassword" placeholder="Create Password" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400" required />
      <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700">Register</button>

      <div class="flex items-center justify-between mt-4">
        <hr class="w-1/4 border-gray-300" />
        <span class="text-gray-500 text-sm">or sign up with</span>
        <hr class="w-1/4 border-gray-300" />
      </div>

      <div class="flex space-x-4 mt-4 justify-center">
        <button class="bg-white border px-4 py-2 rounded-lg shadow hover:bg-gray-100 flex items-center space-x-2">
          <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5" />
          <span class="text-sm">Google</span>
        </button>
        <button class="bg-white border px-4 py-2 rounded-lg shadow hover:bg-gray-100 flex items-center space-x-2">
          <img src="https://www.svgrepo.com/show/448234/linkedin.svg" class="w-5 h-5" />
          <span class="text-sm">LinkedIn</span>
        </button>
      </div>
    </form>
  </div>

  <script>
    const loginBtn = document.getElementById("loginBtn");
    const registerBtn = document.getElementById("registerBtn");
    const loginForm = document.getElementById("loginForm");
    const registerForm = document.getElementById("registerForm");

    loginBtn.addEventListener("click", () => {
      loginForm.classList.remove("hidden");
      registerForm.classList.add("hidden");
      loginBtn.classList.add("bg-indigo-600", "text-white");
      loginBtn.classList.remove("text-indigo-600", "border");
      registerBtn.classList.remove("bg-indigo-600", "text-white");
      registerBtn.classList.add("text-indigo-600", "border");
    });

    registerBtn.addEventListener("click", () => {
      registerForm.classList.remove("hidden");
      loginForm.classList.add("hidden");
      registerBtn.classList.add("bg-indigo-600", "text-white");
      registerBtn.classList.remove("text-indigo-600", "border");
      loginBtn.classList.remove("bg-indigo-600", "text-white");
      loginBtn.classList.add("text-indigo-600", "border");
    });

    // Google login button handler for login form
    const googleLoginBtn = loginForm.querySelector("button img[src*='google-color']").parentElement;
    googleLoginBtn.addEventListener("click", function(e) {
      e.preventDefault();
      // Replace with your Google OAuth client ID and redirect URI
      const clientId = 'YOUR_CLIENT_ID';
      const redirectUri = 'YOUR_REDIRECT_URI';
      const scope = 'email profile';
      const oauthUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=token&scope=${encodeURIComponent(scope)}`;
      window.location.href = oauthUrl;
    });





// Firebase Login
loginForm.addEventListener("submit", function(e) {
  e.preventDefault();
  const email = loginForm.querySelector('input[type="email"]').value;
  const password = loginForm.querySelector('input[type="password"]').value;
  const loginErrorMsg = document.getElementById('loginErrorMsg');
  loginErrorMsg.textContent = '';
  auth.signInWithEmailAndPassword(email, password)
    .then(() => {
      window.location.href = "index.html";
    })
    .catch((error) => {
      if (error.code === 'auth/user-not-found') {
        loginErrorMsg.textContent = '';
        setTimeout(() => {
          document.getElementById('registerBtn').click();
        }, 300);
      } else {
        loginErrorMsg.textContent = 'Email or Password is Invalid';
      }
    });
});

// Firebase Registration
registerForm.addEventListener("submit", function(e) {
  e.preventDefault();
  const email = registerForm.querySelector('input[type="email"]').value;
  const password = registerForm.querySelector('input[type="password"]').value;
  auth.createUserWithEmailAndPassword(email, password)
    .then(() => {
      window.location.href = "index.html";
    })
    .catch((error) => {
      alert(error.message);
    });
});
  </script>
</body>
</html>
